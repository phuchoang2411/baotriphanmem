<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../_partials/header') %>
  <title>Cập nhật thông tin sản phẩm</title>
</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <%- include('../_partials/sidebar'); %>
      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

          <!-- Topbar -->
          <%- include('../_partials/topbar'); %>
            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid">
              <div class="row">
                <div class="col-12 col-md-6 offset-md-3">
                    <h1 class="page-heading mb-4 mt-3 text-center">Cập nhật thông tin sản phẩm</h1>

                    <form action="/product/upload-image/<%= product._id %>" method="post" enctype="multipart/form-data">
                      
                      <% if (product.featuredImage) {%> 
                        <img src="<%= product.featuredImage %>" class="rounded mx-auto d-block mb-3">
                      <% } %> 

                      <div class="mb-3 form-group">
                        <% if (product.featuredImage) {%> 
                          <label for="formFile" class="form-label">Đổi hình ảnh</label>
                        <% } %> 

                        <% if (!product.featuredImage) {%> 
                          <label for="formFile" class="form-label">Hình ảnh</label>
                        <% } %> 
                        <input class="form-control" type="file" id="file" name="image">
                      </div>
                      <button type="submit" class="btn btn-secondary mb-3 btn-block">Upload hình ảnh</button>
                    </form> 

                    <form action="/product/update-product/<%= product._id %>" method="post">
                      <div class="mb-3">
                        <label for="name" class="form-label">Tên sản phẩm</label>
                        <input 
                        type="text" class="form-control" 
                        name="name" id="name" 
                        value="<%= product.name %>" required />
                      </div>

                      <div class="mb-3">
                        <label for="price" class="form-label">Giá</label>
                        <input type="number" class="form-control" 
                        id="price" name="price" 
                        value="<%= product.price %>" required />
                      </div>

                      <div class="form-group mb-3">
                        <label for="categoryId" class="form-label">Chuyên mục</label>
                        <select class="form-control" name="categoryId" id="categoryId">
                            <% for (let category of categories) { %>
                                <option value="<%= category._id%>">
                                    <%= category.name %>
                                </option>
                            <% } %> 
                        </select>
                      </div>  

                      <div class="form-group mb-5">
                        <label for="ownerId" class="form-label">Nhà cung cấp</label>
                        <select class="form-control" name="ownerId" id="ownerId">
                            <% for (let owner of owners) { %>
                                <option value="<%= owner._id%>">
                                    <%= owner.fullName %>
                                </option>
                            <% } %> 
                        </select>
                      </div>

                      <div class="d-grid mt-3 mb-5">
                        <button type="submit" class="btn btn-primary btn-block">Cập nhật</button>
                      </div>
                    </form>
                </div>
              </div>

            </div>
            <!-- /.container-fluid -->
        </div>
        <!-- End of Main Content -->
        <%- include('../_partials/footer') %>
      </div>
      <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->
  <%- include('../_partials/scripts')%>

</body>

</html>